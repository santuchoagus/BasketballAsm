.8086
.MODEL SMALL
.STACK 100H

.DATA
	TEMP_COLOR				DB	0
	TEMP_DRAWRECTANGLE_X	DW	0
	TEMP_DRAWRECTANGLE_Y	DW	0
.CODE

	PUBLIC ABSOLUTE
	PUBLIC CLEAR_SCREEN
	PUBLIC DRAW_RECTANGLE
	PUBLIC INTERPOLATE
	PUBLIC RANDOM_NUMBER

	ABSOLUTE PROC
	;En AX: Valor +/-. Devuelve en AX el valor absoluto.
		CMP AX, 00H
		JGE END_ABS
		NEG AX
		END_ABS:
		RET
	ABSOLUTE ENDP

	RANDOM_NUMBER PROC
		; EN STACK:
		; PUSH DIVISOR    	[BP+4].
		; DEVUELVE EN DX NUMERO EN ESE RANGO.
		PUSH BP
		MOV BP, SP
		PUSH CX
		PUSH AX

		MOV AH, 00H
		INT 1AH

		MOV AX, DX
		XOR DX, DX

		MOV CX, SS:[BP+4]
		DIV CX


		POP AX
		POP CX
		POP BP
		RET 2
	RANDOM_NUMBER ENDP


	CLEAR_SCREEN PROC
		PUSH AX
		PUSH BX

		;CONFIGURACIÓN DE VIDEO (HABRIA QUE ESPECIFICAR MÁS).
		MOV AH, 00H
		MOV AL, 13H
		INT 10H
		;SETEO FONDO EN NEGRO:
		MOV AH, 0BH
		MOV BH, 00H
		MOV BL, 00H
		INT 10H
		;...

		POP BX
		POP AX
		RET
	CLEAR_SCREEN ENDP


	DRAW_RECTANGLE PROC
		; EN STACK:
		;EN CX, COORDENADA (X)
		;EN DX, COORDENADA (Y)
		; En AL el color (00H A 0FH).
		; 1 PUSH BASE    	[BP+6].
		; 2 PUSH ALTURA		[BP+4].

		PUSH BP
		MOV BP, SP
		PUSH AX
		PUSH BX
		PUSH CX
		PUSH DX

		MOV TEMP_COLOR, AL
		MOV TEMP_DRAWRECTANGLE_X, CX
		MOV TEMP_DRAWRECTANGLE_Y, DX

		DRAW_RECTANGLE_LOOP:
		MOV AH, 0CH ;servicio 0ch.
		MOV AL, TEMP_COLOR
		MOV BH, 00H
		INT 10H							;Escribe un pixel.

		INC CX							;Incrementa la coordenada.
		MOV AX, CX
		SUB AX, TEMP_DRAWRECTANGLE_X 	;Se resta la coordenada (X).
		CMP AX, [BP+6]	 				;La diferencia tiene que ser mayor que su base.
		JL DRAW_RECTANGLE_LOOP
		MOV CX, TEMP_DRAWRECTANGLE_X	;Se reinicia la coordenada (X).
		INC DX							;Se incrementa la coordenada (Y).				
		MOV AX, DX
		SUB AX, TEMP_DRAWRECTANGLE_Y		
		CMP AX, [BP+4] 					;La diferencia tiene que ser mayor que la altura.
		JL DRAW_RECTANGLE_LOOP

		POP DX
		POP CX
		POP BX
		POP AX
		POP BP
		RET 4
	DRAW_RECTANGLE ENDP

	INTERPOLATE PROC
		; EN STACK:
		; 1 PUSH NUM1    	[BP+6].
		; 2 PUSH NUM2		[BP+4].
		; DEVUELVE EN AX: PROMEDIO.
		PUSH BP
		MOV BP, SP

		PUSH BX
		PUSH CX
		PUSH DX

		MOV BX, 2
		XOR DX, DX
		MOV AX, [BP+6]
		ADD AX, [BP+4]
		DIV BX

		POP DX
		POP CX
		POP BX
		
		POP BP
		RET 4
	INTERPOLATE ENDP

	DRAW_MAINMENU PROC
		RET
	DRAW_MAINMENU ENDP
END